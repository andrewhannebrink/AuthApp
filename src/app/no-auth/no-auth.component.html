<div>
  <mat-toolbar>
    <span class="title">ðŸ”‘ Auth App</span>
    <span class="example-spacer"></span>
    <div fxShow="true" fxHide.lt-sm="true">
      <!-- The following menu items will be hidden on both SM and XS screen sizes -->
      <a href="#" mat-button (click)="changeView(VIEWS.DEMO)">Demo</a>
      <a href="#" mat-button (click)="changeView(VIEWS.SIGN_UP)">Sign Up</a>
      <a href="#" mat-button (click)="changeView(VIEWS.LOG_IN)">Log In</a>
    </div>
    <div fxShow="true" fxHide.gt-xs="true">
      <a href="#" (click)="sidenav.toggle()">
        <mat-icon class='mobile-menu-icon'>view_headline</mat-icon>
      </a>
    </div>
  </mat-toolbar>

  <mat-sidenav-container fxFlexFill>
    <mat-sidenav #sidenav position="end" fxLayout="column">
      <div fxLayout="column">
        <button mat-button 
            (click)="sidenav.toggle() && changeView(VIEWS.LOG_IN)"
            class="main-category">
          Log In
        </button>
        <button mat-button 
            (click)="sidenav.toggle() && changeView(VIEWS.SIGN_UP)"
            class="main-category">
          Sign Up
        </button>
        <button mat-button 
            (click)="sidenav.toggle() && changeView(VIEWS.DEMO)"
            class="main-category">
          Demo
        </button>
        <button mat-button 
            (click)="sidenav.toggle() && changeView(VIEWS.DEMO)"
            class="sub-option">
          Dashboard
        </button>
        <button mat-button 
            (click)="sidenav.toggle() && changeView(VIEWS.DEMO)"
            class="sub-option">
          Profile
        </button>
      </div>
    </mat-sidenav>

    <mat-sidenav-content fxFlexFill>
      <div class="page-wrapper">  

        <div class="login-wrapper" *ngIf="currentView === VIEWS.LOG_IN || currentView === VIEWS.SIGN_UP">

          <h3 *ngIf="currentView === VIEWS.LOG_IN">ENTER YOUR LOGIN DETAILS BELOW</h3>
          <h3 *ngIf="currentView === VIEWS.SIGN_UP">CREATE AN ACCOUNT</h3>

          <mat-form-field>
            <input matInput required placeholder="Email" [(ngModel)]="typedEmail">
          </mat-form-field>
          <mat-form-field>
            <input matInput required placeholder="Password" [(ngModel)]="typedPassword" type="password">
          </mat-form-field>
          <mat-form-field *ngIf="currentView === VIEWS.SIGN_UP">
            <input matInput required placeholder="Confirm password" [(ngModel)]="typedConfirmPassword" type="password">
          </mat-form-field>
          <span *ngIf="currentView === VIEWS.SIGN_UP">
            <mat-checkbox [(ngModel)]="termsAgreed"></mat-checkbox>
            I agree to the <a [routerLink]="terms">terms and conditions</a> 
          </span>

          <div class="error-messages">
            <p *ngIf="emailOrPasswordIncorrect" class="mat-body-1 mat-error">Email or password incorrect.</p>
            <p *ngIf="signUpError" class="mat-body-1 mat-error">Could not sign up user.</p>
            <p *ngIf="emailBlank" class="mat-body-1 mat-error">Email is required.</p>
            <p *ngIf="passwordsDontMatch" class="mat-body-1 mat-error">Passwords do not match.</p>
            <p *ngIf="invalidEmail" class="mat-body-1 mat-error">Use a valid email.</p>
            <p *ngIf="weakPassword" class="mat-body-1 mat-error">Password must be six or more characters.</p>
            <p *ngIf="emailAlreadyInUse" class="mat-body-1 mat-error">Email already in use.</p>
            <p *ngIf="termsNotAgreedError" class="mat-body-1 mat-error">You must agree to the terms and services.</p>
          </div>

          <div class="side-by-side-buttons" *ngIf="currentView === VIEWS.LOG_IN">
              <button mat-button
                (click)="changeView(VIEWS.FORGOT_PASSWORD)"
                class="subtle-button half-length-button">
              Forgot password?
            </button>
            <button mat-button 
                (click)=loginClicked() 
                class="bright-button half-length-button">
              LOGIN
            </button>
          </div>

          <h6 *ngIf="currentView === VIEWS.LOG_IN">
            Not a member yet? Sign up <a href="#" (click)="changeView(VIEWS.SIGN_UP)">here</a>
          </h6>

          <div class="side-by-side-buttons" *ngIf="currentView === VIEWS.SIGN_UP" >
            <button mat-button
                (click)="changeView(VIEWS.LOG_IN)"
                class="subtle-button half-length-button">
              Already a member?
            </button>
            <button mat-button 
                (click)=signupClicked() 
                class="bright-button half-length-button">
              SIGNUP
            </button>
          </div>

          <h3>- OR -</h3>

          <button mat-button 
              (click)=twitterLoginClicked() 
              class="bright-button twitter-blue full-length-button">
            <fa name="twitter"></fa>{{ (currentView === VIEWS.SIGN_UP ? 'SIGNUP' : 'LOGIN') + ' WITH TWITTER' }}
          </button>
          <button mat-button 
              (click)=facebookLoginClicked() 
              class="bright-button facebook-blue full-length-button">
            <fa name="facebook-f"></fa>{{ (currentView === VIEWS.SIGN_UP ? 'SIGNUP' : 'LOGIN') + ' WITH FACEBOOK' }}
          </button>
          <button mat-button 
              (click)=googleLoginClicked() 
              class="bright-button google-red full-length-button">
            <fa name="google"></fa>{{ (currentView === VIEWS.SIGN_UP ? 'SIGNUP' : 'LOGIN') + ' WITH GOOGLE' }}
          </button>
        </div>

        <div class="login-wrapper" *ngIf="currentView === VIEWS.FORGOT_PASSWORD">
          <h3>RESET YOUR PASSWORD</h3>

          <mat-form-field>
            <input matInput required placeholder="Enter your email" [(ngModel)]="typedEmail">
          </mat-form-field>

          <re-captcha (resolved)="captchaResolved($event)" siteKey="6LcLxGUUAAAAAFDffXi7HnaD6dt7DmTxblaGu8nx"></re-captcha>

          <p *ngIf="passwordResetInvalidEmail" class="mat-body-1 mat-error">Invalid email.</p>
          <p *ngIf="userNotFound" class="mat-body-1 mat-error">Something went wrong.</p>
          <p *ngIf="captchaError" class="mat-body-1 mat-error">Check the box.</p>


          <div class="side-by-side-buttons side-by-side-reverse-wrap-override">
            <button mat-button
                (click)=changeView(VIEWS.LOG_IN)
                class="subtle-button half-length-button">
              Cancel
            </button>
            <button mat-button 
                (click)=resetPasswordClicked() 
                class="bright-button half-length-button">
              RESET PASSWORD 
            </button>
          </div>

          <h5>
            An email with a link to reset your password will be sent to you.
          </h5>
        </div>

        <div class="login-wrapper" *ngIf="currentView === VIEWS.RESET_PASSWORD">
          <h3>YOUR REQUEST HAS BEEN RECEIVED</h3>

          <h5>
            Please check your email inbox in 5 minutes and follow the password reset instructions.
          </h5>

          <h6>
            Did not receive the email yet? Check your spam folder. 
          </h6>

          <div class="side-by-side-buttons side-by-side-reverse-wrap-override">
            <button mat-button
                (click)=changeView(VIEWS.FORGOT_PASSWORD) 
                class="subtle-button half-length-button">
              Re-send email
            </button>
            <button mat-button 
                (click)=changeView(VIEWS.LOG_IN) 
                class="bright-button half-length-button">
              LOGIN 
            </button>
          </div>
        </div>


        <div class="login-wrapper" *ngIf="currentView === VIEWS.VERIFY_EMAIL">
          <h3> CONFIRM YOUR EMAIL </h3>

          <h5> 
            Check your inbox for a confirmation email. Click the link in the email to confirm your email address.
          </h5>

          <h6>
            Did not receive the email yet? Check your spam folder. 
          </h6>

          <div class="side-by-side-buttons side-by-side-reverse-wrap-override">
            <button mat-button
                (click)="resendEmailVerification()"
                class="subtle-button half-length-button">
              Re-send email
            </button>
            <button mat-button
                (click)="changeView(VIEWS.LOG_IN)"
                class="bright-button half-length-button">
              LOGIN 
            </button>
          </div>

          <p *ngIf="verifyEmailError" class="mat-body-1 mat-error">Something went wrong. Email not delivered.</p>
          <p *ngIf="verifyEmailResentSuccessfully" class="mat-body-1 success">Another confirmation email was sent to {{ authService.getCurrentUser().email }}.</p>

        </div>

        <app-footer></app-footer>

      </div>

    </mat-sidenav-content>

  </mat-sidenav-container>

</div>
